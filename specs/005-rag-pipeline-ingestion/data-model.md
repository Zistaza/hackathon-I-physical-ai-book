# Data Model: RAG Pipeline â€“ Website Content Ingestion, Embedding Generation, and Vector Storage

## Entity: ContentChunk

**Description**: A segment of text extracted from the Docusaurus website with associated metadata

**Fields**:
- `id` (string): Unique identifier for the chunk (hash of source_url + content)
- `content` (string): The actual text content of the chunk
- `source_url` (string): The URL from which this content was extracted
- `module` (string): Module/chapter identifier from the source
- `chunk_index` (integer): Sequential index of this chunk within the source document
- `created_at` (datetime): Timestamp when the chunk was created
- `content_hash` (string): Hash of the content for idempotency checks

**Validation Rules**:
- `content` must not be empty
- `source_url` must be a valid URL format
- `chunk_index` must be non-negative

## Entity: EmbeddingVector

**Description**: A numerical representation of text content generated by Cohere models

**Fields**:
- `chunk_id` (string): Reference to the ContentChunk this embedding represents
- `vector` (list[float]): The embedding vector (numerical representation)
- `model_name` (string): Name of the model used to generate the embedding
- `model_version` (string): Version of the model used
- `created_at` (datetime): Timestamp when the embedding was generated

**Validation Rules**:
- `vector` must have consistent dimensions based on the embedding model
- `chunk_id` must reference an existing ContentChunk

## Entity: PipelineConfig

**Description**: Configuration settings that control the ingestion process

**Fields**:
- `docusaurus_urls` (list[string]): List of Docusaurus website URLs to process
- `chunk_size` (integer): Maximum number of characters per content chunk
- `chunk_overlap` (integer): Number of characters to overlap between chunks
- `cohere_model` (string): Name of the Cohere model to use for embeddings
- `qdrant_collection_name` (string): Name of the Qdrant collection to store vectors
- `qdrant_url` (string): URL of the Qdrant Cloud instance
- `qdrant_api_key` (string): API key for Qdrant Cloud (stored securely)

**Validation Rules**:
- `docusaurus_urls` must contain valid URL formats
- `chunk_size` must be positive and within embedding model limits
- `chunk_overlap` must be less than `chunk_size`

## Entity: ProcessingResult

**Description**: Result of a pipeline processing operation

**Fields**:
- `id` (string): Unique identifier for this processing result
- `status` (string): Status of the processing (success, failed, partial)
- `processed_chunks_count` (integer): Number of chunks successfully processed
- `failed_chunks_count` (integer): Number of chunks that failed processing
- `start_time` (datetime): When processing started
- `end_time` (datetime): When processing completed
- `error_details` (string, optional): Details about any errors that occurred

**Validation Rules**:
- `status` must be one of: "success", "failed", "partial"
- `processed_chunks_count` and `failed_chunks_count` must be non-negative

## Relationships

- One `PipelineConfig` is used to process multiple `ContentChunk` instances
- One `ContentChunk` generates one `EmbeddingVector`
- Multiple `ContentChunk` instances are stored in one Qdrant collection
- One pipeline execution produces one `ProcessingResult` with many `ContentChunk` entries

## State Transitions

For ProcessingResult:
- Initial state: Processing begins (status tracked separately)
- On completion: Status becomes "success", "failed", or "partial" based on results